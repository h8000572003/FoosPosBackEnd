<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="pages/default.xhtml">

	<ui:define name="content">
		<h:form id="form">



			<b:well>
				<h1>查詢歷史菜單</h1>

				<table>
					<tr>

						<th><p:outputLabel value="查詢年:  " /></th>
						<td><p:calendar id="mask" value="#{billBean.dto.queryDate}"
								pattern="yyyy-MM-dd" mask="true">

							</p:calendar></td>
					</tr>
				</table>

				<br></br>



				<p:dataTable var="item" value="#{billBean.dto.bills}">


					<p:column headerText="訂單時間">
						<h:outputText value="#{item.bill.orderTime}"
							converter="com.food.pos.bean.converter.TimeConverter">

						</h:outputText>
					</p:column>

					<p:column headerText="收費金額">
						<h:outputText value="#{item.bill.dollar}" />
					</p:column>


					<p:column style="text-align: center" headerText="檢視">
						<p:commandButton update="@form"
							oncomplete="PF('billDialog').show()" icon="ui-icon-search"
							title="View">
							<f:setPropertyActionListener value="#{item}"
								target="#{billBean.dto.selectBill}" />
						</p:commandButton>

					</p:column>

				</p:dataTable>



				<p:dialog header="商品明細" widgetVar="billDialog" modal="true"
					showEffect="fade" hideEffect="fade" resizable="false">
					<p:outputPanel id="detial" style="text-align:center;">



						<b:well>
							<b:row>





								<ui:repeat var="item" value="#{billBean.dto.selectBill.meals}">


									<b:column span="4">
										<b:inputText disabled="true"
											value="#{item.name} x #{item.number} " />
									</b:column>
								</ui:repeat>

							</b:row>
						</b:well>
					</p:outputPanel>
				</p:dialog>


				<b:commandButton value="查詢" action="#{billBean.doQuery}"></b:commandButton>
			</b:well>


			
			
			 
		
		</h:form>

	</ui:define>




</ui:composition>
</html>