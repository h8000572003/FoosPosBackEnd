<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:b="http://bootsfaces.net/ui" xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="pages/default.xhtml">

	<ui:define name="content">
		<h:form id="form">
			<b:well>
				<b:row styleClass="show-grid">
					<b:column span="2">
						<b:panel style="height:300px;">
							<h4>
								<strong>內用(總)</strong>
							</h4>

							<ui:repeat var="subitem" value="#{billBean.dto.inBill.meals}">
									#{subitem.name} x #{subitem.number}
									<br />
							</ui:repeat>
						</b:panel>


					</b:column>
					<b:column span="2">
						<b:panel style="height:300px;">
							<h4>
								<strong>外帶(總)</strong>
							</h4>

							<ui:repeat var="subitem" value="#{billBean.dto.outBill.meals}">
									#{subitem.name} x #{subitem.number}
									<br />
							</ui:repeat>
						</b:panel>


					</b:column>

					<ui:repeat var="item" value="#{billBean.dto.bills}">

						<b:column span="2">

							<b:panel style="height:300px;">
								<p:commandButton styleClass="btn btn-primary" look="primary"
									value="$#{item.bill.dollar}"
									actionListener="#{billBean.selectBill(item)}"
									oncomplete="PF('buyDialog').show()"></p:commandButton>

								<br />
								#{item.bill.useNo}<h:outputText value="#{item.bill.outOrIn}">
									<f:converter
										converterId="com.food.pos.bean.converter.CodeConverter"></f:converter>
								</h:outputText>





								<br />

								<ui:repeat var="subitem" value="#{item.meals}">
									#{subitem.name} x #{subitem.number}
									<br />
								</ui:repeat>

							</b:panel>
						</b:column>
					</ui:repeat>
				</b:row>

			</b:well>

			 <p:dialog header="結單" widgetVar="buyDialog" modal="true"
				showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel>
					<b:well>
						<h3>是否結單?</h3>
						<p:commandButton styleClass="btn btn-primary"
							actionListener="#{billBean.convert2History}" update="@form"
							oncomplete="PF('buyDialog').hide();" value="是"></p:commandButton>
						<p:commandButton styleClass="btn btn-default" update="@form"
							oncomplete="PF('buyDialog').hide();" value="否"></p:commandButton>
					</b:well>
				</p:outputPanel>
			</p:dialog>

		</h:form>

	</ui:define>




</ui:composition>
</html>